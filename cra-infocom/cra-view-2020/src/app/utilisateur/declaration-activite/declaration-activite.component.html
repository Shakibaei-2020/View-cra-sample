<app-utilisateur></app-utilisateur>
<br><br><br>

<!-- Declaration d'activité  -->


<div class="contenue">
  <div class="Frais">

    <h2> Déclaration d'activité </h2>
  </div>
  <select class="form-input2" [(ngModel)]="monthSelected"  (change)="historique()">
    <option value="1">Janvier</option>
    <option value="2">Février</option>
    <option value="3">Mars</option>
    <option value="4">Avril</option>
    <option value="5">Mai</option>
    <option value="6">Juin</option>
    <!-- 
    <option value="7">Juillet</option>
    <option value="8">Août</option>
    <option value="9">Septembre</option>
    <option value="10">Octobre</option>
    <option value="11">Novembre</option>
    <option value="12">Décembre</option>
  -->
  </select>
  <select class="form-input3" value="2021" [(ngModel)]="yearInput" name="yearInput"  (change)="historique()">
    <option value="2021">2021</option>

    <option value="2022">2022</option>
    <!-- 

    <option value="2023">2023</option>
    <option value="2024">2024</option>
    -->

  </select>

  <!-- ACTIVITE 1-->
  <table id="pdfTable" #pdfTable>
    <thead>
      <tr>
        <th class="enTete">Projets </th>

        <th class="enTete">R.AUTO </th>
        <th class="enTeteDates" *ngFor="let element of tabJours;">{{element}} </th>
        <th class="enTete">total</th>
      </tr>
    </thead>
    <tbody (change)="totalAllActivity()">
      <tr>
        <td>
          <select  id="selectedOption" class="form-input choice" [(ngModel)]="selectedOption" (change)="onChangeSelectOption()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>

        <td>
          <button  id="remplirProjet1" class="btnRemplirActivity" (click)="remplirProjet1()">Remplir</button>
          <button  id="remplirRemoteP1"  class="btnRemplirActivity" (click)="remplirRemoteP1()">TAD</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay" step="0.25" min="0" max="1" name="jour-{{indexOfelement}}"
            id="jour-{{indexOfelement}}" type="number" value="{{dureeProjet1}}" [disabled]="" (change)="total()"
            value="0">
          <input class="inputRemote" name="remote-{{indexOfelement}}" id="remote-{{indexOfelement}}" type="checkbox"
            [checked]="isRemote" value="{{isRemote}}">
        </td>
        <td>
          <input class="inputDay twolast" type="number" value={{totalProjet1}} id="totalProjet1" [disabled]="false" required
            [(ngModel)]="totalProjet1" name="totalProjet1">
        </td>
      </tr>

      <!-- ACTIVITE 2-->

      <tr>
        <td>
          <select  id="selectedOption2"  class="form-input choice" [(ngModel)]="selectedOption2" (change)="onChangeSelectOption2()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>

        <td>
          <button id="remplirProjet2" class="btnRemplirActivity" (click)="remplirProjet2()">Remplir</button>
          <button id= "remplirRemoteP2" class="btnRemplirActivity" (click)="remplirRemoteP2()">TAD</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay" step="0.25" min="0" max="1" name="jour2-{{indexOfelement}}"
            id="jour2-{{indexOfelement}}" type="number" value="{{dureeProjet2}}" [disabled]="" (change)="total2()"
            value="0">
          <input class="inputRemote" name="remote2-{{indexOfelement}}" id="remote2-{{indexOfelement}}" type="checkbox"
            [checked]="isRemote2" value="{{isRemote2}}">
        </td>
        <td>
          <input class="inputDay twolast" type="number" value={{totalProjet2}} id="totalProjet2" required
            [(ngModel)]="totalProjet2" name="totalProjet2">
        </td>
      </tr>

      <!-- ACTIVITE 3-->

      <tr>
        <td>
          <select id="selectedOption3"   class="form-input choice" [(ngModel)]="selectedOption3" (change)="onChangeSelectOption3()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>
        <td>
          <button id="remplirProjet3" class="btnRemplirActivity" (click)="remplirProjet3()">Remplir</button>
          <button id="remplirRemoteP3" class="btnRemplirActivity" (click)="remplirRemoteP3()">TAD</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay" step="0.25" min="0" max="1" name="jour3-{{indexOfelement}}"
            id="jour3-{{indexOfelement}}" type="number" value="{{dureeProjet3}}" [disabled]="" (change)="total3()"
            value="0">
          <input class="inputRemote" name="remote3-{{indexOfelement}}" id="remote3-{{indexOfelement}}" type="checkbox"
            [checked]="isRemote3" value="{{isRemote3}}">
        </td>
        <td>
          <input class="inputDay twolast" type="number" value={{totalProjet3}} id="totalProjet3" required
            [(ngModel)]="totalProjet3" name="totalProjet3">
        </td>
      </tr>

      <!-- ACTIVITE 4-->

      <tr>
        <td>
          <select  id="selectedOption4"  class="form-input" [(ngModel)]="selectedOption4" (change)="onChangeSelectOption4()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>
        <td>
          <button id="remplirProjet4" class="btnRemplirActivity" (click)="remplirProjet4()">Remplir</button>
          <button id="remplirRemoteP4" class="btnRemplirActivity" (click)="remplirRemoteP4()">TAD</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay" step="0.25" min="0" max="1" name="jour4-{{indexOfelement}}"
            id="jour4-{{indexOfelement}}" type="number" value="{{dureeProjet4}}" [disabled]="" (change)="total4()"
            value="0">
          <input class="inputRemote" name="remote4-{{indexOfelement}}" id="remote4-{{indexOfelement}}" type="checkbox"
            [checked]="isRemote4" value="{{isRemote4}}">
        </td>
        <td>
          <input class="inputDay twolast" type="number" value={{totalProjet4}} id="totalProjet4" required
            [(ngModel)]="totalProjet4" name="totalProjet4">
        </td>
      </tr>


    </tbody>
  </table>
  <br>

  <span>Total de jours travaillés :</span> <input class="inputDay2" type="number" value={{totalActivity}} required
    [(ngModel)]="totalActivity" name="totalActivity">

  <br> <br> <br>
  <!-- ASTREINTE -->


  <h2> Astreinte </h2>
  <table>
    <thead>
      <tr>
        <th>PROJECT </th>
        <th>TYPE </th>
        <th>UNITE </th>
        <th>R.AUTO </th>
        <th *ngFor="let element of tabJours;">{{element}} </th>
        <th>total</th>
      </tr>
    </thead>
    <tbody>
      <!-- ASTREINTE 1-->

      <tr>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedProjectAstreint1" (change)="onChangeSelectprojectAstreinte1()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedTypeUpdateValue1"
            (change)="selectedTypeUpdate1()">
            <option [disabled]="typeActivity.id === 1 " [hidden]="typeActivity.id === 1 "
              *ngFor="let typeActivity of lesTypeActivity" value="{{typeActivity.id}}" selected="true"
              disabled="disabled">{{typeActivity.type}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedUniteAstreint1">
            <option value="1">Heure</option>
            <option value="2">Jour</option>
          </select>
        </td>
        <td>
          <button class="btnRemplir" (click)="remplirAstreinte1()">Remplir</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay2" name="jourAstreinte1-{{indexOfelement}}" id="jourAstreinte1-{{indexOfelement}}"
            type="number" value="{{dureeAstreinte1}}" (change)="total5()">
        </td>
        <td><input class=" inputDay2" type="number"  id="totalAstreinte1HTMl" value={{totalAstreinte1}}></td>
      </tr>
      <!-- ASTREINTE 2 -->
      <tr>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedProjectAstreint2"  (change)="onChangeSelectprojectAstreinte2()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedTypeUpdateValue2"
            (change)="selectedTypeUpdate2()">
            <option *ngFor="let typeActivity of lesTypeActivity" value="{{typeActivity.id}}">{{typeActivity.type}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedUniteAstreint2">
            <option value="1">Heure</option>
            <option value="2">Jour</option>
          </select>
        </td>
        <td>
          <button class="btnRemplir" (click)="remplirAstreinte2()">Remplir</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class=" inputDay2" name="jourAstreinte2-{{indexOfelement}}" id="jourAstreinte2-{{indexOfelement}}"
            type="number" value="{{dureeAstreinte2}}" (change)="total6()">
        </td>
        <td><input class=" inputDay2" type="number" id="totalAstreinte2HTMl" value={{totalAstreinte2}}></td>
      </tr>
      <!-- ASTREINTE 3 -->

      <tr>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedProjectAstreint3"  (change)="onChangeSelectprojectAstreinte3()">
            <option *ngFor="let project of projects" value="{{project.project.id}}">{{project.project.projectTitle}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedTypeUpdateValue3"
            (change)="selectedTypeUpdate3()">
            <option *ngFor="let typeActivity of lesTypeActivity" value="{{typeActivity.id}}">{{typeActivity.type}}
            </option>
          </select>
        </td>
        <td>
          <select type="number" class="form-input" [(ngModel)]="selectedUniteAstreint3">
            <option value="1">Heure</option>
            <option value="2">Jour</option>
          </select>
        </td>
        <td>
          <button class="btnRemplir" (click)="remplirAstreinte3()">Remplir</button>
        </td>
        <td *ngFor="let element of tabJours;let indexOfelement=index;">
          <input class="inputDay2" name="jourAstreinte3-{{indexOfelement}}" id="jourAstreinte3-{{indexOfelement}}"
            type="number" value="{{dureeAstreinte3}}" (change)="total7()">
        </td>
        <td><input class="inputDay2" type="number" id="totalAstreinte3HTMl"  value={{totalAstreinte3}}></td>
      </tr>
    </tbody>
  </table>
</div>

<div class="register">
  <button class="send" (click)="EnregisterEtEnvoyer()">Enregister & Envoyer</button>
  <button class="send" (click)="imprimer()">Imprimer</button>
  <button class="send">Aide</button>
  <button class="send" (click)="retour()">Retour</button>

  <button class="send" (click)="Envoyer()">Envoyé</button>
  <button class="send" (click)="disableWeekend()">JF</button>
  <button class="send" (click)="  ActivitiesToUpdate()  ">activity to update</button>

</div>











<br><br><br><br>


